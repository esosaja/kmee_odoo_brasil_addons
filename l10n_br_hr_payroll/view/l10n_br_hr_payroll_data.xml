<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        
        <!-- Registros de Contribuição -->
        
        <record id="hr_csd_contribution_register" model="hr.contribution.register">
            <field name="name">Desconto da Contribuição Sindical</field>
        </record>

        <record id="hr_vt_contribution_register" model="hr.contribution.register">
            <field name="name">Desconto do Vale Transporte</field>
        </record>
 
        <record id="hr_inss_contribution_register" model="hr.contribution.register">
            <field name="name">Desconto do INSS</field>
        </record>
        
        <record id="hr_fgts_contribution_register" model="hr.contribution.register">
            <field name="name">Desconto do FGTS</field>
        </record>
        
        <record id="hr_ir_contribution_register" model="hr.contribution.register">
            <field name="name">Desconto do IR</field>
        </record>
        
        <record id="hr_ps_contribution_register" model="hr.contribution.register">
            <field name="name">Desconto do Plano de Saúde</field>
        </record>

        <record id="hr_psd_contribution_register" model="hr.contribution.register">
            <field name="name">Desconto do Plano de Saúde de Dependente</field>
        </record>

        <record id="hr_vr_contribution_register" model="hr.contribution.register">
            <field name="name">Adicional do Vale Refeição</field>
        </record>
        
        <record id="hr_va_contribution_register" model="hr.contribution.register">
            <field name="name">Adicional do Vale Alimentação</field>
        </record>                               
        
        <!-- Regras de Salário -->

        <record id="hr_salary_rule_inss" model="hr.salary.rule">
            <field name="code">INSS</field>
            <field name="name">INSS</field>
            <field name="category_id" ref="hr_payroll.DED"/>           
            <field name="amount_select">code</field>
			<field name="amount_python_compute">result =(-482.93 if ((contract.wage - (employee.number_dependent * 179.71)) &gt;= 4390.25) else -((contract.wage - (employee.number_dependent * 179.71)) * 0.11) if ((contract.wage - (employee.number_dependent*179.71)) &gt;= 2195.13) and ((contract.wage - (employee.number_dependent * 179.71)) &lt;= 4390.24) else -((contract.wage - (employee.number_dependent*179.71)) * 0.09) if ((contract.wage - (employee.number_dependent * 179.71)) &gt;= 1317.08) and ((contract.wage - (employee.number_dependent*179.71)) &lt;= 2195.12) else -((contract.wage - (employee.number_dependent * 179.71)) * 0.08))</field>
            <field name="sequence" eval="101"/>
            <field name="register_id" ref="hr_inss_contribution_register"/>
            <field name="note">INSS</field>
        </record>  
	
        <record id="hr_salary_rule_imp_renda" model="hr.salary.rule">
            <field name="code">IR</field>
            <field name="name">Imposto de Renda</field>
            <field name="category_id" ref="hr_payroll.DED"/>                
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = (-(contract.wage * 0.275) if (contract.wage &gt;= 4463.81) 
else (-(contract.wage * 0.225)) if ((contract.wage &lt;= 4463.80) and (contract.wage &gt;= 3572.44)) 
else (-(contract.wage * 0.15)) if ((contract.wage &lt;= 2679.30) and (contract.wage &gt;= 3572.43)) 
else (-(contract.wage * 0.075)) if ((contract.wage &lt;= 1787.78) and (contract.wage &gt;= 2679.29)) 
else 0)</field>
            <field eval="102" name="sequence"/>
            <field name="register_id" ref="hr_ir_contribution_register"/>            
            <field name="note">Imposto de Renda Salarial</field>
        </record> 

        <record id="hr_salary_rule_fgts" model="hr.salary.rule">
            <field name="code">FGTS</field>
            <field name="name">FGTS</field>
            <field name="category_id" ref="hr_payroll.DED"/>           
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = (-((contract.wage) * 0.08))</field>
            <field name="sequence" eval="103"/>
            <field name="register_id" ref="hr_fgts_contribution_register"/>
            <field name="note">Empregado terá desconto de 8% de FGTS</field>
        </record>

        <record id="hr_salary_rule_plano_saude" model="hr.salary.rule">
            <field name="code">Plano Saúde</field>
            <field name="name">Plano Saúde</field>
            <field name="category_id" ref="hr_payroll.DED"/>           
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = (-((contract.health_insurance_father * employee.number_dependent) * 0.6) if (contract.wage &gt;= 2384.01) 
else (-((contract.health_insurance_father * employee.number_dependent) * 0.5)) if (contract.wage &gt;= 1430.01) and (contract.wage &lt;= 2384.00) 
else (-((contract.health_insurance_father * employee.number_dependent) * 0.4) if (contract.wage &gt;= 0.01) and (contract.wage &lt;= 1430.00) 
else 0))</field>
            <field name="sequence" eval="107"/>
            <field name="register_id" ref="hr_ps_contribution_register"/>            
            <field name="note">Valor do Plano de Saúde</field>
        </record>

        <record id="hr_salary_rule_plano_saude_dependente" model="hr.salary.rule">
            <field name="code">Plano Saúde Dependente</field>
            <field name="name">Plano Saúde Dependente</field>
            <field name="category_id" ref="hr_payroll.DED"/>           
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = (-((contract.health_insurance_dependent * employee.number_dependent) * 1))</field>            
            <field name="sequence" eval="110"/>
            <field name="register_id" ref="hr_psd_contribution_register"/>            
            <field name="note">Empregado terá desconto sobre seu Plano de Saúde mediante a Dependente</field>
        </record> 
        
        <record id="hr_salary_rule_pensao_alimenticia" model="hr.salary.rule">
            <field name="code">Pensão Alimentícia</field>
            <field name="name">Pensão Alimentícia</field>
            <field name="category_id" ref="hr_payroll.DED"/> 
          	<field name="condition_select">python</field>          
            <field name="amount_select">code</field>    
            <field name="condition_python">result = -(employee.pension_benefit*employee.number_dependent)</field>
            <field name="amount_python_compute">result =  -(employee.pension_benefit*employee.number_dependent) if employee.pension_benefit else 0</field>        
            <field name="sequence" eval="133"/>    
            <field name="note">Empregado terá desconto sobre Pensão Alimenticia</field>
        </record> 
                                  
        <record id="hr_salary_rule_csd" model="hr.salary.rule">
            <field name="code">CSD</field>
            <field name="name">Contribuição Sindical</field>
            <field name="category_id" ref="hr_payroll.DED"/>           
            <field name="amount_select">code</field>
            <field name="condition_python">result = bool(contract.calc_date)</field>
            <field name="amount_python_compute">result = -0.035*contract.wage if contract.calc_date else 0</field>
            <field name="sequence" eval="104"/>
            <field name="register_id" ref="hr_csd_contribution_register"/>
            <field name="note">Empregado terá um desconto de 3.5% em um dia do ano.</field>
        </record> 
                  
        <record id="hr_salary_rule_vt" model="hr.salary.rule">
            <field name="code">VT</field>
            <field name="name">Vale Transporte</field>
            <field name="category_id" ref="hr_payroll.DED"/>
            <field name="condition_select">python</field>
            <field name="condition_python">result = contract.wage</field>             
            <field name="amount_select">percentage</field>
            <field name="amount_percentage_base">contract.wage</field>
            <field name="amount_percentage" eval="-6.00"/>
            <field name="sequence" eval="105"/>
            <field name="register_id" ref="hr_vt_contribution_register"/>            
            <field name="note"> Empregado terá um desconto de 6% do seu salário mediante ao Vale Transporte.</field>
        </record>
               
    	<record id="hr_payroll_rules_vr" model="hr.salary.rule">
	        <field name="category_id" ref="hr_payroll.COMP"/>
	        <field name="name">Vale Refeição</field>
	        <field name="code">Vale Refeição</field>
	        <field name="amount_select">code</field>
	        <field name="sequence">70</field>
            <field name="register_id" ref="hr_vr_contribution_register"/> 	        
	        <field name="condition_select">python</field>
	        <field name="condition_python">result = (contract.check_amount * contract.workeddays)</field>
	        <field name="amount_python_compute">result = contract.check_amount * contract.workeddays</field>
            <field name="register_id" ref="hr_vr_contribution_register"/> 
	        <field name="note">Vale Refeição</field>
    	</record>
        
        <record id="hr_salary_rule_va" model="hr.salary.rule">
            <field name="code">VA</field>
            <field name="name">Vale Alimentação</field>
            <field name="category_id" ref="hr_payroll.COMP"/>
            <field name="condition_select">python</field>
            <field name="condition_python">result = (contract.check_amount * contract.workeddays)</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.check_amount * contract.workeddays</field>
            <field name="sequence" eval="80"/>
            <field name="register_id" ref="hr_va_contribution_register"/>           
            <field name="note">Vale Alimentação</field>
        </record>  
    </data>
</openerp>